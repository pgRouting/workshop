<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Graph views &#8212; Workshop - FOSS4G  - Routing with pgRouting</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=4468db6d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css?v=226d88b4" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=fa3951f0" />
    <script src="../_static/documentation_options.js?v=81b50374"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. SQL function" href="sql_function.html" />
    <link rel="prev" title="3. Vehicle Routing" href="vehicle.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Workshop FOSS4G </a>
        <span class="navbar-text navbar-version pull-left"><b>3.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Chapters <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/introduction.html">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/introduction.html#basic">1.1. Basic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/introduction.html#advanced">1.2. Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/introduction.html#aknowledments">1.3. Aknowledments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/introduction.html#become-a-sponsor">1.4. Become a sponsor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/osgeolive.html">2. OSGeoLive Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/osgeolive.html#install-virtualbox">2.1. Install VirtualBox.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/osgeolive.html#osgeolive-on-a-virtualbox">2.2. OSGeoLive on a VirtualBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/osgeolive.html#ubuntu-installation">2.3. Ubuntu installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../general-intro/overview.html">3. Software and Data Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/overview.html#pgrouting-overview">3.1. pgRouting Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/overview.html#osm2pgrouting-overview">3.2. osm2pgrouting Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-intro/overview.html#openstreetmap-overview">3.3. OpenStreetMap Overview</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="data.html">1. Prepare Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="data.html#prepare-the-database">1.1. Prepare the database</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html#get-the-workshop-data">1.2. Get the Workshop Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html#upload-data-to-the-database">1.3. Upload data to the database</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html#chapter-appendix">1.4. Chapter: Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pedestrian.html">2. Pedestrian Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pedestrian.html#pgr-dijkstra">2.1. pgr_dijkstra</a></li>
<li class="toctree-l2"><a class="reference internal" href="pedestrian.html#pgr-dijkstracost">2.2. pgr_dijkstraCost</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vehicle.html">3. Vehicle Routing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="vehicle.html#routing-for-vehicles">3.1. Routing for vehicles</a></li>
<li class="toctree-l2"><a class="reference internal" href="vehicle.html#cost-manipulations">3.2. Cost manipulations</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Graph views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-graph-requirements">4.1. The graph requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pgr-extractvertices">4.2. pgr_extractVertices</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pgr-connectedcomponents">4.3. pgr_connectedComponents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparing-the-graphs">4.4. Preparing the graphs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sql_function.html">5. SQL function</a><ul>
<li class="toctree-l2"><a class="reference internal" href="sql_function.html#the-application-requirements">5.1. The application requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_function.html#additional-information-handling">5.2. Additional information handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_function.html#geometry-handling">5.3. Geometry handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="sql_function.html#creating-the-function">5.4. Creating the Function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="plpgsql_function.html">6. pl/pgsql function</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plpgsql_function.html#requirements-for-routing-from-a-to-b">6.1. Requirements for routing from A to B</a></li>
<li class="toctree-l2"><a class="reference internal" href="plpgsql_function.html#the-vertices-table">6.2. The Vertices Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="plpgsql_function.html#wrk-fromatob-function">6.3. wrk_fromAtoB function</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced/chapter-12.html">1. Create a Network Topology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced/chapter-12.html#load-network-data">1.1. Load network data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/chapter-12.html#create-a-routing-network-topology">1.2. Create a Routing Network Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/chapter-12.html#verify-the-routing-network-topology">1.3. Verify the Routing Network Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced/chapter-12.html#analyze-and-adjust-the-routing-network-topology">1.4. Analyze and Adjust the Routing Network Topology</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/data.html">1. Data for Sustainable Development Goals</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/data.html#work-directory-for-pgrouting-data-manipulation">1.1. Work Directory for pgRouting data manipulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/data.html#mumbai-database">1.2. Mumbai database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/data.html#bangladesh-database">1.3. Bangladesh database</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/data.html#appendix">1.4. Appendix</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/introduction.html">2. Achieving Sustainable Development Goals with pgRouting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/introduction.html#history">2.1. History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/introduction.html#united-nations">2.2. United Nations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/introduction.html#what-are-the-sustainable-development-goals">2.3. What are the Sustainable Development Goals?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/introduction.html#target-audience">2.4. Target Audience</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/introduction.html#prerequisites-for-un-sdg-exercises">2.5. Prerequisites for UN SDG Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg3-health.html">3. Good Health and Well Being</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg3-health.html#problem-estimation-of-population-served-by-hospitals">3.1. Problem: Estimation of Population Served by Hospitals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg3-health.html#pre-processing-roads-and-buildings-data">3.2. Pre-processing roads and buildings data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg3-health.html#finding-the-roads-served-by-the-hospitals">3.3. Finding the roads served by the hospitals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg3-health.html#calculating-the-total-population-served-by-the-hospital">3.4. Calculating the total population served by the hospital</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg7-energy.html">4. Affordable and Clean Energy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#problem-optimising-the-electricity-distribution-network">4.1. Problem: Optimising the Electricity Distribution Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#pre-processing-roads-data">4.2. Pre-processing roads data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#pgr-connectedcomponents-for-preprocessing-roads">4.3. pgr_connectedComponents for preprocessing roads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#extract-connected-components-of-roads">4.4. Extract connected components of roads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#pgr-kruskaldfs">4.5. pgr_kruskalDFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#exercise-10-find-the-minimum-spanning-tree">4.6. Exercise 10: Find the minimum spanning tree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#comparison-between-total-and-optimal-lengths">4.7. Comparison between Total and Optimal lengths</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg7-energy.html#further-possible-extensions-to-the-exercise">4.8. Further possible extensions to the exercise</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/sdg11-cities.html">5. Sustainable Cities and Communities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#problem-city-getting-affected-by-rain-or-not">5.1. Problem: City getting affected by rain or not</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#choose-a-city">5.2. Choose a city</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#pre-processing-waterways-data">5.3. Pre-processing waterways data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#pgr-connectedcomponents-for-preprocessing-waterways">5.4. pgr_connectedComponents for preprocessing waterways</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#exercise-8-get-the-connected-components-of-waterways">5.5. Exercise 8: Get the Connected Components of Waterways</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#exercise-9-creating-buffer-around-the-city">5.6. Exercise 9: Creating buffer around the city</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#exercise-11-finding-the-components-intersecting-the-buffer">5.7. Exercise 11: Finding the components intersecting the buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#exercise-12-get-the-rain-zones">5.8. Exercise 12: Get the rain zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/sdg11-cities.html#exercise-13-create-a-union-of-rain-zones">5.9. Exercise 13: Create a union of rain zones</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../un_sdg/appendix.html">6. Appendix: OSGeo UN Challenge Workshop Solutions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/appendix.html#solutions-to-chapter-3-sdg3-health">6.1. Solutions to Chapter 3: <span class="xref std std-doc">sdg3-health</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/appendix.html#solutions-to-sdg7-energy">6.2. Solutions to <span class="xref std std-doc">sdg7-energy</span></a></li>
<li class="toctree-l2"><a class="reference internal" href="../un_sdg/appendix.html#solutions-to-sdg11-cities">6.3. Solutions to <span class="xref std std-doc">sdg11-cities</span></a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-9.html">1. Using Qgis</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-9.html#set-up-qgis">1.1. Set Up QGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-9.html#add-a-postgis-layer">1.2. Add a postGIS Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-9.html#format-a-routing-layer">1.3. Format a Routing Layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-9.html#copy-paste-format">1.4. Copy/Paste Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-9.html#save-the-project">1.5. Save the project</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-10.html">2. WMS server with GeoServer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-10.html#connect-to-the-administration-page">2.1. Connect to the administration page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-10.html#create-the-layer">2.2. Create the layer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../interactions/chapter-11.html">3. OpenLayers Based Routing Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#openlayers-introduction">3.1. OpenLayers introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#creating-a-minimal-map">3.2. Creating a minimal map</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#wms-get-parameters">3.3. WMS GET parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#select-start-and-destination">3.4. Select “start” and “destination”</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#clear-the-results">3.5. Clear the results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactions/chapter-11.html#summary-full-example">3.6. Summary (full example)</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/boost_dijkstra.html">1. Boost Dijkstra Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/hanoslav.html">2. Internet Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/wiki_example.html">3. Wikipedia Dijkstra Example</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-2.html">1. Appendix: Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-3.html">2. Appendix: osm2pgrouting Import Tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/appendix-4.html">3. Video Tutorials for Workshop</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix/appendix-4.html#chapter-4">3.1. Chapter 4</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">4. Graph views</a><ul>
<li><a class="reference internal" href="#the-graph-requirements">4.1. The graph requirements</a></li>
<li><a class="reference internal" href="#pgr-extractvertices">4.2. pgr_extractVertices</a><ul>
<li><a class="reference internal" href="#exercise-1-create-a-vertices-table">4.2.1. Exercise 1: Create a vertices table</a></li>
<li><a class="reference internal" href="#exercise-2-fill-up-other-columns-in-the-vertices-table">4.2.2. Exercise 2: Fill up other columns in the vertices table</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pgr-connectedcomponents">4.3. pgr_connectedComponents</a><ul>
<li><a class="reference internal" href="#exercise-3-set-components-on-edges-and-vertices-tables">4.3.1. Exercise 3: Set components on edges and vertices tables</a></li>
<li><a class="reference internal" href="#exercise-4-inspect-the-components">4.3.2. Exercise 4: Inspect the components</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparing-the-graphs">4.4. Preparing the graphs</a><ul>
<li><a class="reference internal" href="#exercise-5-creating-a-view-for-routing">4.4.1. Exercise 5: Creating a view for routing</a></li>
<li><a class="reference internal" href="#exercise-6-limiting-the-road-network-within-an-area">4.4.2. Exercise 6: Limiting the road network within an area</a></li>
<li><a class="reference internal" href="#exercise-7-creating-a-materialized-view-for-routing-pedestrians">4.4.3. Exercise 7: Creating a materialized view for routing pedestrians</a></li>
<li><a class="reference internal" href="#exercise-8-testing-the-views-for-routing">4.4.4. Exercise 8: Testing the views for routing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="vehicle.html" title="Previous Chapter: 3. Vehicle Routing"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 3. Vehicle Routing</span>
    </a>
  </li>
  <li>
    <a href="sql_function.html" title="Next Chapter: 5. SQL function"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">5. SQL function &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">4. Graph views</a><ul>
<li><a class="reference internal" href="#the-graph-requirements">4.1. The graph requirements</a></li>
<li><a class="reference internal" href="#pgr-extractvertices">4.2. pgr_extractVertices</a><ul>
<li><a class="reference internal" href="#exercise-1-create-a-vertices-table">4.2.1. Exercise 1: Create a vertices table</a></li>
<li><a class="reference internal" href="#exercise-2-fill-up-other-columns-in-the-vertices-table">4.2.2. Exercise 2: Fill up other columns in the vertices table</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pgr-connectedcomponents">4.3. pgr_connectedComponents</a><ul>
<li><a class="reference internal" href="#exercise-3-set-components-on-edges-and-vertices-tables">4.3.1. Exercise 3: Set components on edges and vertices tables</a></li>
<li><a class="reference internal" href="#exercise-4-inspect-the-components">4.3.2. Exercise 4: Inspect the components</a></li>
</ul>
</li>
<li><a class="reference internal" href="#preparing-the-graphs">4.4. Preparing the graphs</a><ul>
<li><a class="reference internal" href="#exercise-5-creating-a-view-for-routing">4.4.1. Exercise 5: Creating a view for routing</a></li>
<li><a class="reference internal" href="#exercise-6-limiting-the-road-network-within-an-area">4.4.2. Exercise 6: Limiting the road network within an area</a></li>
<li><a class="reference internal" href="#exercise-7-creating-a-materialized-view-for-routing-pedestrians">4.4.3. Exercise 7: Creating a materialized view for routing pedestrians</a></li>
<li><a class="reference internal" href="#exercise-8-testing-the-views-for-routing">4.4.4. Exercise 8: Testing the views for routing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <li>
    <a href="vehicle.html" title="Previous Chapter: 3. Vehicle Routing"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 3. Vehicle Routing</span>
    </a>
  </li>
  <li>
    <a href="sql_function.html" title="Next Chapter: 5. SQL function"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">5. SQL function &raquo;</span>
    </a>
  </li>
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <section id="graph-views">
<h1><a class="toc-backref" href="#id1" role="doc-backlink"><span class="section-number">4. </span>Graph views</a><a class="headerlink" href="#graph-views" title="Link to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../_images/route.png"><img alt="../_images/route.png" class="align-center" src="../_images/route.png" style="width: 333.0px; height: 217.25px;" />
</a>
<nav class="contents" id="chapter-contents">
<p class="topic-title">Chapter Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#graph-views" id="id1">Graph views</a></p>
<ul>
<li><p><a class="reference internal" href="#the-graph-requirements" id="id2">The graph requirements</a></p></li>
<li><p><a class="reference internal" href="#pgr-extractvertices" id="id3">pgr_extractVertices</a></p>
<ul>
<li><p><a class="reference internal" href="#exercise-1-create-a-vertices-table" id="id4">Exercise 1: Create a vertices table</a></p></li>
<li><p><a class="reference internal" href="#exercise-2-fill-up-other-columns-in-the-vertices-table" id="id5">Exercise 2: Fill up other columns in the vertices table</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pgr-connectedcomponents" id="id6">pgr_connectedComponents</a></p>
<ul>
<li><p><a class="reference internal" href="#exercise-3-set-components-on-edges-and-vertices-tables" id="id7">Exercise 3: Set components on edges and vertices tables</a></p></li>
<li><p><a class="reference internal" href="#exercise-4-inspect-the-components" id="id8">Exercise 4: Inspect the components</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#preparing-the-graphs" id="id9">Preparing the graphs</a></p>
<ul>
<li><p><a class="reference internal" href="#exercise-5-creating-a-view-for-routing" id="id10">Exercise 5: Creating a view for routing</a></p></li>
<li><p><a class="reference internal" href="#exercise-6-limiting-the-road-network-within-an-area" id="id11">Exercise 6: Limiting the road network within an area</a></p></li>
<li><p><a class="reference internal" href="#exercise-7-creating-a-materialized-view-for-routing-pedestrians" id="id12">Exercise 7: Creating a materialized view for routing pedestrians</a></p></li>
<li><p><a class="reference internal" href="#exercise-8-testing-the-views-for-routing" id="id13">Exercise 8: Testing the views for routing</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<p>Different application require different graphs. This chapter covers how to
discard disconnected segments and different approaches to create graphs.</p>
<section id="the-graph-requirements">
<h2><a class="toc-backref" href="#id2" role="doc-backlink"><span class="section-number">4.1. </span>The graph requirements</a><a class="headerlink" href="#the-graph-requirements" title="Link to this heading">¶</a></h2>
<p>In this chapter there are three graph requirements. It consists on three <strong>fully
connected</strong> graphs: two for different types of vehicles and one for pedestrian,
the source and the target in all of them are based on the <code class="docutils literal notranslate"><span class="pre">source_osm</span></code> and
<code class="docutils literal notranslate"><span class="pre">target_osm</span></code>.</p>
<p>The description of the graphs:</p>
<ul class="simple">
<li><p>Particular vehicle:</p>
<ul>
<li><p>Circulate on the whole Belém area.</p>
<ul>
<li><p>Do not use <cite>steps</cite>, <cite>footway</cite>, <cite>path</cite>, <cite>cycleway</cite>.</p></li>
</ul>
</li>
<li><p>Speed is the default speed from OSM information.</p></li>
</ul>
</li>
<li><p>Taxi vehicle:</p>
<ul>
<li><p>Circulate on a smaller area:</p>
<ul>
<li><p>Bounding box: <code class="docutils literal notranslate"><span class="pre">(-48.52,-1.46,-48.45,-1.41)</span></code></p></li>
<li><p>Do not use <cite>steps</cite>, <cite>footway</cite>, <cite>path</cite>, <cite>cycleway</cite>.</p></li>
</ul>
</li>
<li><p>Speed is 10% slower than that of the particular vehicles.</p></li>
</ul>
</li>
<li><p>Pedestrians:</p>
<ul>
<li><p>Walk on the whole Belém area.</p></li>
<li><p>Can not walk on exclusive vehicle ways</p>
<ul>
<li><p><cite>motorways</cite> and on <cite>primary</cite> segments.</p></li>
</ul>
</li>
<li><p>The speed is <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">mts/sec</span></code>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="pgr-extractvertices">
<h2><a class="toc-backref" href="#id3" role="doc-backlink"><span class="section-number">4.2. </span>pgr_extractVertices</a><a class="headerlink" href="#pgr-extractvertices" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pgr_extractVertices</span></code> compute the connected components of an undirected
graph using a Depth First Search approach. A connected component of an
undirected graph is a set of vertices that are all reachable from each other.</p>
<p class="rubric">Signature summary</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_extractVertices</span><span class="p">(</span><span class="n">Edges</span><span class="w"> </span><span class="k">SQL</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">dryrun</span><span class="p">])</span>

<span class="k">RETURNS</span><span class="w"> </span><span class="k">SETOF</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">in_edges</span><span class="p">,</span><span class="w"> </span><span class="n">out_edges</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span><span class="p">)</span>
<span class="k">OR</span><span class="w"> </span><span class="n">EMTPY</span><span class="w"> </span><span class="k">SET</span>
</pre></div>
</div>
<p>Description of the function can be found in <a class="reference external" href="https://docs.pgrouting.org/latest/en/pgr_connectedComponents.html">pgr_extractVertices</a></p>
<section id="exercise-1-create-a-vertices-table">
<h3><a class="toc-backref" href="#id4" role="doc-backlink"><span class="section-number">4.2.1. </span>Exercise 1: Create a vertices table</a><a class="headerlink" href="#exercise-1-create-a-vertices-table" title="Link to this heading">¶</a></h3>
<p class="rubric">Problem</p>
<p>Create the vertices table corresponding to the edges in <code class="docutils literal notranslate"><span class="pre">ways</span></code>.</p>
<p class="rubric">Solution</p>
<ul class="simple">
<li><p>A graph consists of a set of vertices and a set of edges.</p></li>
<li><p>In this case, the <code class="docutils literal notranslate"><span class="pre">ways</span></code> table is a set of edges.</p></li>
<li><p>In order to make use of all the graph functions from pgRouting, it is required
have the set of vertices defined.</p></li>
<li><p>From the requirements, the graph is going to be based on OSM identifiers.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">ways_vertices</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pgr_extractVertices</span><span class="p">(</span>
<span class="hll"><span class="w">  </span><span class="s1">&#39;SELECT gid AS id, source_osm AS source, target_osm AS target</span>
</span><span class="s1">  FROM ways ORDER BY id&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="18f741e9-965a-4c1e-8bfb-f0e6efbdd0f2" name="18f741e9-965a-4c1e-8bfb-f0e6efbdd0f2" type="checkbox"><label class="sphinx_collapse__label" for="18f741e9-965a-4c1e-8bfb-f0e6efbdd0f2"><i class="sphinx_collapse__icon"></i>Number of inserted records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="mi">24229</span>
</pre></div>
</div>
</div>
</div>
<p>Reviewing the description of the vertices table</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">dS</span><span class="o">+</span> <span class="n">ways_vertices</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="d636aa92-6846-4843-8e1a-a43bd73557d8" name="d636aa92-6846-4843-8e1a-a43bd73557d8" type="checkbox"><label class="sphinx_collapse__label" for="d636aa92-6846-4843-8e1a-a43bd73557d8"><i class="sphinx_collapse__icon"></i>Description</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                            <span class="n">Table</span> <span class="s2">&quot;public.ways_vertices&quot;</span>
  <span class="n">Column</span>   <span class="o">|</span>       <span class="n">Type</span>       <span class="o">|</span> <span class="n">Collation</span> <span class="o">|</span> <span class="n">Nullable</span> <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Storage</span>  <span class="o">|</span> <span class="n">Compression</span> <span class="o">|</span> <span class="n">Stats</span> <span class="n">target</span> <span class="o">|</span> <span class="n">Description</span> 
<span class="o">-----------+------------------+-----------+----------+---------+----------+-------------+--------------+-------------</span>
 <span class="nb">id</span>        <span class="o">|</span> <span class="n">bigint</span>           <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">in_edges</span>  <span class="o">|</span> <span class="n">bigint</span><span class="p">[]</span>         <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">extended</span> <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">out_edges</span> <span class="o">|</span> <span class="n">bigint</span><span class="p">[]</span>         <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">extended</span> <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">x</span>         <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span> <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">y</span>         <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span> <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">geom</span>      <span class="o">|</span> <span class="n">geometry</span>         <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">main</span>     <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
<span class="n">Access</span> <span class="n">method</span><span class="p">:</span> <span class="n">heap</span>

</pre></div>
</div>
</div>
</div>
<p>Inspecting the information on the vertices table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">Limit</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="5d79b99c-fd42-4ed4-ae55-ccb3b88b367d" name="5d79b99c-fd42-4ed4-ae55-ccb3b88b367d" type="checkbox"><label class="sphinx_collapse__label" for="5d79b99c-fd42-4ed4-ae55-ccb3b88b367d"><i class="sphinx_collapse__icon"></i>Data on table</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>     <span class="nb">id</span>      <span class="o">|</span>   <span class="n">in_edges</span>    <span class="o">|</span>  <span class="n">out_edges</span>  <span class="o">|</span> <span class="n">x</span> <span class="o">|</span> <span class="n">y</span> <span class="o">|</span> <span class="n">geom</span> 
<span class="o">-------------+---------------+-------------+---+---+------</span>
  <span class="mi">9394966362</span> <span class="o">|</span> <span class="p">{</span><span class="mi">25781</span><span class="p">,</span><span class="mi">25782</span><span class="p">}</span> <span class="o">|</span> <span class="p">{</span><span class="mi">488</span><span class="p">,</span><span class="mi">16592</span><span class="p">}</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
  <span class="mi">9019011681</span> <span class="o">|</span> <span class="p">{</span><span class="mi">23099</span><span class="p">}</span>       <span class="o">|</span> <span class="p">{</span><span class="mi">157</span><span class="p">,</span><span class="mi">23098</span><span class="p">}</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
 <span class="mi">11815385950</span> <span class="o">|</span> <span class="p">{</span><span class="mi">27717</span><span class="p">}</span>       <span class="o">|</span> <span class="p">{</span><span class="mi">133</span><span class="p">}</span>       <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
  <span class="mi">9181303083</span> <span class="o">|</span> <span class="p">{</span><span class="mi">25473</span><span class="p">,</span><span class="mi">31938</span><span class="p">}</span> <span class="o">|</span> <span class="p">{</span><span class="mi">275</span><span class="p">,</span><span class="mi">31880</span><span class="p">}</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
   <span class="mi">370759582</span> <span class="o">|</span> <span class="p">{</span><span class="mi">507</span><span class="p">,</span><span class="mi">508</span><span class="p">}</span>     <span class="o">|</span> <span class="p">{</span><span class="mi">87</span><span class="p">,</span><span class="mi">26943</span><span class="p">}</span>  <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
 <span class="mi">10047447949</span> <span class="o">|</span> <span class="p">{</span><span class="mi">26180</span><span class="p">}</span>       <span class="o">|</span> <span class="p">{</span><span class="mi">33</span><span class="p">,</span><span class="mi">29142</span><span class="p">}</span>  <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
  <span class="mi">4057861890</span> <span class="o">|</span> <span class="p">{</span><span class="mi">14889</span><span class="p">,</span><span class="mi">14890</span><span class="p">}</span> <span class="o">|</span> <span class="p">{</span><span class="mi">261</span><span class="p">,</span><span class="mi">16280</span><span class="p">}</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
   <span class="mi">606964623</span> <span class="o">|</span> <span class="p">{</span><span class="mi">7984</span><span class="p">}</span>        <span class="o">|</span> <span class="p">{</span><span class="mi">419</span><span class="p">,</span><span class="mi">7985</span><span class="p">}</span>  <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
   <span class="mi">491465232</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1325</span><span class="p">,</span><span class="mi">1326</span><span class="p">}</span>   <span class="o">|</span> <span class="p">{</span><span class="mi">467</span><span class="p">,</span><span class="mi">13501</span><span class="p">}</span> <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
   <span class="mi">491465172</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1268</span><span class="p">,</span><span class="mi">1269</span><span class="p">}</span>   <span class="o">|</span> <span class="p">{</span><span class="mi">10</span><span class="p">}</span>        <span class="o">|</span>   <span class="o">|</span>   <span class="o">|</span> 
<span class="p">(</span><span class="mi">10</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-2-fill-up-other-columns-in-the-vertices-table">
<h3><a class="toc-backref" href="#id5" role="doc-backlink"><span class="section-number">4.2.2. </span>Exercise 2: Fill up other columns in the vertices table</a><a class="headerlink" href="#exercise-2-fill-up-other-columns-in-the-vertices-table" title="Link to this heading">¶</a></h3>
<p class="rubric">Problem</p>
<p>Fill up geometry information on the vertices table.</p>
<p class="rubric">Solution</p>
<p>Count the number of rows that need to be filled up.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">ways_vertices</span> <span class="n">WHERE</span> <span class="n">geom</span> <span class="n">IS</span> <span class="n">NULL</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="dc2a4e8b-97b6-46c6-81ed-44e23029462a" name="dc2a4e8b-97b6-46c6-81ed-44e23029462a" type="checkbox"><label class="sphinx_collapse__label" for="dc2a4e8b-97b6-46c6-81ed-44e23029462a"><i class="sphinx_collapse__icon"></i>Number of rows with empty geometry</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
 <span class="mi">24229</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">geom</span></code> columns based on the <code class="docutils literal notranslate"><span class="pre">sourse_osm</span></code> column
from <code class="docutils literal notranslate"><span class="pre">ways</span></code> table.</p></li>
<li><p>Use the start point of the geometry.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ST_startPoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">source_osm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="a32406b2-2556-4973-9109-158374253c30" name="a32406b2-2556-4973-9109-158374253c30" type="checkbox"><label class="sphinx_collapse__label" for="a32406b2-2556-4973-9109-158374253c30"><i class="sphinx_collapse__icon"></i>Number of updated records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="mi">21275</span>
</pre></div>
</div>
</div>
</div>
<p>Not expecting to be done due to the fact that some vertices are only dead ends.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="3d975c53-4ad7-45d9-931d-b12a61373e1f" name="3d975c53-4ad7-45d9-931d-b12a61373e1f" type="checkbox"><label class="sphinx_collapse__label" for="3d975c53-4ad7-45d9-931d-b12a61373e1f"><i class="sphinx_collapse__icon"></i>Numbers of records that need update</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
  <span class="mi">2954</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">geom</span></code> columns based on the <code class="docutils literal notranslate"><span class="pre">target_osm</span></code> column
from <code class="docutils literal notranslate"><span class="pre">ways</span></code> table.</p></li>
<li><p>Use the end point of the geometry.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ST_endPoint</span><span class="p">(</span><span class="n">the_geom</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">target_osm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="dccfe8aa-731d-44b1-b948-b47013c51fb4" name="dccfe8aa-731d-44b1-b948-b47013c51fb4" type="checkbox"><label class="sphinx_collapse__label" for="dccfe8aa-731d-44b1-b948-b47013c51fb4"><i class="sphinx_collapse__icon"></i>Number of updated records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="mi">2954</span>
</pre></div>
</div>
</div>
</div>
<p>Expecting to be done, that is the geometry column should not have a <code class="docutils literal notranslate"><span class="pre">NULL</span></code>
value.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">geom</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="dae6db6b-3c6c-4416-8e5d-154323b3f44a" name="dae6db6b-3c6c-4416-8e5d-154323b3f44a" type="checkbox"><label class="sphinx_collapse__label" for="dae6db6b-3c6c-4416-8e5d-154323b3f44a"><i class="sphinx_collapse__icon"></i>Count should be 0</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
     <span class="mi">0</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>Update the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> columns based on the <code class="docutils literal notranslate"><span class="pre">geom</span></code> column.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ST_X</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span><span class="w"> </span><span class="n">ST_Y</span><span class="p">(</span><span class="n">geom</span><span class="p">));</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="2aee5912-b99b-4717-b9d3-fcd08ffa6121" name="2aee5912-b99b-4717-b9d3-fcd08ffa6121" type="checkbox"><label class="sphinx_collapse__label" for="2aee5912-b99b-4717-b9d3-fcd08ffa6121"><i class="sphinx_collapse__icon"></i>Number of updated records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="mi">24229</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="pgr-connectedcomponents">
<h2><a class="toc-backref" href="#id6" role="doc-backlink"><span class="section-number">4.3. </span>pgr_connectedComponents</a><a class="headerlink" href="#pgr-connectedcomponents" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pgr_connectedComponents</span></code> compute the connected components of an undirected
graph using a Depth First Search approach. A connected component of an
undirected graph is a set of vertices that are all reachable from each other.</p>
<p class="rubric">Signature summary</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_connectedComponents</span><span class="p">(</span><span class="n">edges_sql</span><span class="p">)</span>

<span class="k">RETURNS</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="k">OF</span><span class="w"> </span><span class="p">(</span><span class="n">seq</span><span class="p">,</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="n">node</span><span class="p">)</span>
<span class="k">OR</span><span class="w"> </span><span class="n">EMPTY</span><span class="w"> </span><span class="k">SET</span>
</pre></div>
</div>
<p>Description of the function can be found in <a class="reference external" href="https://docs.pgrouting.org/latest/en/pgr_connectedComponents.html">pgr_connectedComponents</a></p>
<section id="exercise-3-set-components-on-edges-and-vertices-tables">
<h3><a class="toc-backref" href="#id7" role="doc-backlink"><span class="section-number">4.3.1. </span>Exercise 3: Set components on edges and vertices tables</a><a class="headerlink" href="#exercise-3-set-components-on-edges-and-vertices-tables" title="Link to this heading">¶</a></h3>
<p class="rubric">Problem</p>
<p>Get the information about the graph components.</p>
<p class="rubric">Solution</p>
<p>Create additional columns on the edges and vertices tables.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">;</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="f91b98f6-2e38-4bcd-aa36-e848cd4616a6" name="f91b98f6-2e38-4bcd-aa36-e848cd4616a6" type="checkbox"><label class="sphinx_collapse__label" for="f91b98f6-2e38-4bcd-aa36-e848cd4616a6"><i class="sphinx_collapse__icon"></i>Message about creation of columns</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">pgr_connectedComponents</span></code> to fill up the vertices table.</p>
<ul>
<li><p>Use the results to store the component numbers on the vertices table.
(<strong>line 1</strong>)</p></li>
<li><p>Use the OSM identifiers of the vertices. (<strong>lines 4-5</strong>)</p></li>
</ul>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="k">UPDATE</span><span class="w"> </span><span class="n">ways_vertices</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">component</span>
</span><span class="k">FROM</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_connectedComponents</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;SELECT gid as id,</span>
<span class="hll"><span class="s1">    source_osm AS source,</span>
</span><span class="hll"><span class="s1">    target_osm AS target,</span>
</span><span class="s1">    cost, reverse_cost FROM ways&#39;</span>
<span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">c</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="9fc861f5-ba1e-4af1-998f-57eee6d0da8e" name="9fc861f5-ba1e-4af1-998f-57eee6d0da8e" type="checkbox"><label class="sphinx_collapse__label" for="9fc861f5-ba1e-4af1-998f-57eee6d0da8e"><i class="sphinx_collapse__icon"></i>Number of updated records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="mi">24229</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Update the edges table with based on the component number of the vertex</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">UPDATE</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">component</span>
<span class="k">FROM</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways_vertices</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">v</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">source_osm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="n">id</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="2d441a90-f9d7-481a-bfc5-2178fe6e846a" name="2d441a90-f9d7-481a-bfc5-2178fe6e846a" type="checkbox"><label class="sphinx_collapse__label" for="2d441a90-f9d7-481a-bfc5-2178fe6e846a"><i class="sphinx_collapse__icon"></i>Number of updated records</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="mi">32586</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-4-inspect-the-components">
<h3><a class="toc-backref" href="#id8" role="doc-backlink"><span class="section-number">4.3.2. </span>Exercise 4: Inspect the components</a><a class="headerlink" href="#exercise-4-inspect-the-components" title="Link to this heading">¶</a></h3>
<p class="rubric">Problem</p>
<p>Answer the following questions:</p>
<ol class="arabic simple">
<li><p>How many components are in the vertices table?</p></li>
<li><p>How many components are in the edges table?</p></li>
<li><p>List the 10 components with more edges.</p></li>
<li><p>Get the component with the maximum number of edges.</p></li>
</ol>
<p class="rubric">Solution</p>
<ol class="arabic simple">
<li><p>How many components are in the vertices table?</p></li>
</ol>
<p>Count the distinct components.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">component</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways_vertices</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="dee2a540-9035-4127-886c-4f7b80728569" name="dee2a540-9035-4127-886c-4f7b80728569" type="checkbox"><label class="sphinx_collapse__label" for="dee2a540-9035-4127-886c-4f7b80728569"><i class="sphinx_collapse__icon"></i>Number of components on vertex table</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
   <span class="mi">108</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="2">
<li><p>How many components are in the edges table?</p></li>
</ol>
<p>Count the distinct components.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">component</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="f2f8de1c-f56a-4e59-a37a-59376df66bd8" name="f2f8de1c-f56a-4e59-a37a-59376df66bd8" type="checkbox"><label class="sphinx_collapse__label" for="f2f8de1c-f56a-4e59-a37a-59376df66bd8"><i class="sphinx_collapse__icon"></i>Number of components on edge table</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
   <span class="mi">108</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="3">
<li><p>List the 10 components with more edges.</p></li>
</ol>
<ul class="simple">
<li><p>Count number of rows grouped by component. (<strong>line 1</strong>)</p></li>
<li><p>Inverse order to display the top 10. (<strong>line 2</strong>)</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">component</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="k">DESC</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="ce67c40a-54de-49b1-9d3a-b94f96ac1f2d" name="ce67c40a-54de-49b1-9d3a-b94f96ac1f2d" type="checkbox"><label class="sphinx_collapse__label" for="ce67c40a-54de-49b1-9d3a-b94f96ac1f2d"><i class="sphinx_collapse__icon"></i>Top 10 components</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">component</span>  <span class="o">|</span> <span class="n">count</span> 
<span class="o">-------------+-------</span>
   <span class="mi">247780039</span> <span class="o">|</span> <span class="mi">32164</span>
  <span class="mi">5857529375</span> <span class="o">|</span>   <span class="mi">117</span>
 <span class="mi">11351599106</span> <span class="o">|</span>    <span class="mi">22</span>
  <span class="mi">4321917778</span> <span class="o">|</span>    <span class="mi">19</span>
 <span class="mi">11177916097</span> <span class="o">|</span>    <span class="mi">17</span>
  <span class="mi">6117200807</span> <span class="o">|</span>    <span class="mi">15</span>
  <span class="mi">3976699256</span> <span class="o">|</span>    <span class="mi">14</span>
 <span class="mi">11776230037</span> <span class="o">|</span>    <span class="mi">13</span>
 <span class="mi">11177916268</span> <span class="o">|</span>    <span class="mi">10</span>
 <span class="mi">11352002684</span> <span class="o">|</span>    <span class="mi">10</span>
<span class="p">(</span><span class="mi">10</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<ol class="arabic simple" start="4">
<li><p>Get the component with the maximum number of edges.</p></li>
</ol>
<ul class="simple">
<li><p>Use the query from last question to get the maximum count</p></li>
<li><p>Get the component that matches the maximum value.</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">WITH</span>
<span class="n">all_components</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">component</span><span class="p">),</span>
<span class="n">max_component</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="k">count</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">all_components</span><span class="p">)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">all_components</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">max_component</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="6b915b7a-e272-4354-83a0-c7c4fa06f37e" name="6b915b7a-e272-4354-83a0-c7c4fa06f37e" type="checkbox"><label class="sphinx_collapse__label" for="6b915b7a-e272-4354-83a0-c7c4fa06f37e"><i class="sphinx_collapse__icon"></i>Component with maxmum edge count</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">component</span> 
<span class="o">-----------</span>
 <span class="mi">247780039</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="preparing-the-graphs">
<h2><a class="toc-backref" href="#id9" role="doc-backlink"><span class="section-number">4.4. </span>Preparing the graphs</a><a class="headerlink" href="#preparing-the-graphs" title="Link to this heading">¶</a></h2>
<section id="exercise-5-creating-a-view-for-routing">
<h3><a class="toc-backref" href="#id10" role="doc-backlink"><span class="section-number">4.4.1. </span>Exercise 5: Creating a view for routing</a><a class="headerlink" href="#exercise-5-creating-a-view-for-routing" title="Link to this heading">¶</a></h3>
<a class="reference internal image-reference" href="../_images/vehicle_net.png"><img alt="View of roads for vehicles" src="../_images/vehicle_net.png" style="width: 333.0px; height: 217.25px;" />
</a>
<p class="rubric">Problem</p>
<ul class="simple">
<li><p>Create a view with minimal amount of information for processing the particular vehicles.</p></li>
<li><p>Use the OSM identifiers on the vertices.</p></li>
<li><p>Routing <cite>cost</cite> and <cite>reverse_cost</cite> in terms of seconds for routing calculations.</p></li>
<li><p>Exclude <cite>steps</cite>, <cite>footway</cite>, <cite>path</cite>, <cite>cycleway</cite> segments.</p></li>
<li><p>Data needed in the view for further processing.</p>
<ul>
<li><p><cite>name</cite> The name of the segment.</p></li>
<li><p><cite>length_m</cite> The length in meters rename to <code class="docutils literal notranslate"><span class="pre">length</span></code>.</p></li>
<li><p><cite>the_geom</cite> The geometry rename to <code class="docutils literal notranslate"><span class="pre">geom</span></code>.</p></li>
</ul>
</li>
<li><p>Verify the number of edges was reduced.</p></li>
</ul>
<p class="rubric">Solution</p>
<p>Creating the view:</p>
<ul class="simple">
<li><p>If you need to reconstruct the view, first drop it using the command on <strong>line
1</strong>.</p></li>
<li><p>Get the component with maximum number of edges (<strong>lines 6-10</strong>)</p></li>
<li><p>The <cite>source</cite> and <cite>target</cite> requirements for the function are to be with OSM
identifiers. (line <strong>14</strong>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> are in terms of seconds. (line <strong>15</strong>)</p></li>
<li><p>The additional parameters <code class="docutils literal notranslate"><span class="pre">length_m</span></code> and <code class="docutils literal notranslate"><span class="pre">the_geom</span></code> are renamed, <code class="docutils literal notranslate"><span class="pre">name</span></code>
is also included. (line <strong>16</strong>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JOIN</span></code> with the <cite>configuration</cite>:</p>
<ul>
<li><p>Exclude <cite>steps</cite>, <cite>footway</cite>, <cite>path</cite>, <cite>cycleway</cite>. (line <strong>18</strong>)</p></li>
</ul>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- DROP VIEW vehicle_net CASCADE;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vehicle_net</span><span class="w"> </span><span class="k">AS</span>

<span class="k">WITH</span>
<span class="hll"><span class="n">all_components</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">component</span><span class="p">),</span><span class="w"> </span><span class="c1">-- line 6</span>
</span><span class="hll"><span class="n">max_component</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="k">count</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">all_components</span><span class="p">),</span>
</span><span class="hll"><span class="n">the_component</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span>
</span><span class="hll"><span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">all_components</span>
</span><span class="hll"><span class="w">  </span><span class="k">WHERE</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">max_component</span><span class="p">))</span>
</span>
<span class="k">SELECT</span>
<span class="w">  </span><span class="n">gid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
<span class="hll"><span class="w">  </span><span class="n">source_osm</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target_osm</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="c1">-- line 14</span>
</span><span class="hll"><span class="w">  </span><span class="n">cost_s</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span><span class="w"> </span><span class="n">reverse_cost_s</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">reverse_cost</span><span class="p">,</span>
</span><span class="hll"><span class="w">  </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">length_m</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">length</span><span class="p">,</span><span class="w"> </span><span class="n">the_geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span>
</span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">the_component</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">component</span><span class="p">)</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">tag_id</span><span class="p">)</span>
<span class="hll"><span class="k">WHERE</span><span class="w">  </span><span class="n">tag_value</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;steps&#39;</span><span class="p">,</span><span class="s1">&#39;footway&#39;</span><span class="p">,</span><span class="s1">&#39;path&#39;</span><span class="p">,</span><span class="s1">&#39;cycleway&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">-- line 18</span>
</span></pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="8d3d8c96-f77a-494e-a0a6-57c9a495a4d1" name="8d3d8c96-f77a-494e-a0a6-57c9a495a4d1" type="checkbox"><label class="sphinx_collapse__label" for="8d3d8c96-f77a-494e-a0a6-57c9a495a4d1"><i class="sphinx_collapse__icon"></i>Response of command</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">VIEW</span>
</pre></div>
</div>
</div>
</div>
<p>Verification:</p>
<p>Count the rows on the original <code class="docutils literal notranslate"><span class="pre">ways</span></code> and on <code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">ways</span><span class="p">;</span>
<span class="n">SELECT</span> <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">FROM</span> <span class="n">vehicle_net</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="5474b985-24d9-4787-8b12-a7e5882cb1bd" name="5474b985-24d9-4787-8b12-a7e5882cb1bd" type="checkbox"><label class="sphinx_collapse__label" for="5474b985-24d9-4787-8b12-a7e5882cb1bd"><i class="sphinx_collapse__icon"></i>Row count results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
 <span class="mi">32586</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

 <span class="n">count</span> 
<span class="o">-------</span>
 <span class="mi">27632</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>Get the description of the view</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">dS</span><span class="o">+</span> <span class="n">vehicle_net</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="134a3c38-2332-4b16-a61e-e4a7d71ec9f7" name="134a3c38-2332-4b16-a61e-e4a7d71ec9f7" type="checkbox"><label class="sphinx_collapse__label" for="134a3c38-2332-4b16-a61e-e4a7d71ec9f7"><i class="sphinx_collapse__icon"></i>The view description</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                     <span class="n">View</span> <span class="s2">&quot;public.vehicle_net&quot;</span>
    <span class="n">Column</span>    <span class="o">|</span>           <span class="n">Type</span>            <span class="o">|</span> <span class="n">Collation</span> <span class="o">|</span> <span class="n">Nullable</span> <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Storage</span>  <span class="o">|</span> <span class="n">Description</span> 
<span class="o">--------------+---------------------------+-----------+----------+---------+----------+-------------</span>
 <span class="nb">id</span>           <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">source</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">target</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">cost</span>         <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">reverse_cost</span> <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">name</span>         <span class="o">|</span> <span class="n">text</span>                      <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">extended</span> <span class="o">|</span> 
 <span class="n">length</span>       <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">geom</span>         <span class="o">|</span> <span class="n">geometry</span><span class="p">(</span><span class="n">LineString</span><span class="p">,</span><span class="mi">4326</span><span class="p">)</span> <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">main</span>     <span class="o">|</span> 
<span class="n">View</span> <span class="n">definition</span><span class="p">:</span>
 <span class="n">WITH</span> <span class="n">all_components</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="n">ways_1</span><span class="o">.</span><span class="n">component</span><span class="p">,</span>
            <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">AS</span> <span class="n">count</span>
           <span class="n">FROM</span> <span class="n">ways</span> <span class="n">ways_1</span>
          <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">ways_1</span><span class="o">.</span><span class="n">component</span>
        <span class="p">),</span> <span class="n">max_component</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="nb">max</span><span class="p">(</span><span class="n">all_components</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="n">AS</span> <span class="nb">max</span>
           <span class="n">FROM</span> <span class="n">all_components</span>
        <span class="p">),</span> <span class="n">the_component</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="n">all_components</span><span class="o">.</span><span class="n">component</span>
           <span class="n">FROM</span> <span class="n">all_components</span>
          <span class="n">WHERE</span> <span class="n">all_components</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="p">((</span> <span class="n">SELECT</span> <span class="n">max_component</span><span class="o">.</span><span class="n">max</span>
                   <span class="n">FROM</span> <span class="n">max_component</span><span class="p">))</span>
        <span class="p">)</span>
 <span class="n">SELECT</span> <span class="n">ways</span><span class="o">.</span><span class="n">gid</span> <span class="n">AS</span> <span class="nb">id</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">source_osm</span> <span class="n">AS</span> <span class="n">source</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">target_osm</span> <span class="n">AS</span> <span class="n">target</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">cost_s</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">reverse_cost_s</span> <span class="n">AS</span> <span class="n">reverse_cost</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">length_m</span> <span class="n">AS</span> <span class="n">length</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">the_geom</span> <span class="n">AS</span> <span class="n">geom</span>
   <span class="n">FROM</span> <span class="n">ways</span>
     <span class="n">JOIN</span> <span class="n">the_component</span> <span class="n">USING</span> <span class="p">(</span><span class="n">component</span><span class="p">)</span>
     <span class="n">JOIN</span> <span class="n">configuration</span> <span class="n">USING</span> <span class="p">(</span><span class="n">tag_id</span><span class="p">)</span>
  <span class="n">WHERE</span> <span class="n">configuration</span><span class="o">.</span><span class="n">tag_value</span> <span class="o">&lt;&gt;</span> <span class="n">ALL</span> <span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;steps&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;footway&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;cycleway&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">]);</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-6-limiting-the-road-network-within-an-area">
<h3><a class="toc-backref" href="#id11" role="doc-backlink"><span class="section-number">4.4.2. </span>Exercise 6: Limiting the road network within an area</a><a class="headerlink" href="#exercise-6-limiting-the-road-network-within-an-area" title="Link to this heading">¶</a></h3>
<a class="reference internal image-reference" href="../_images/taxi_net.png"><img alt="View of smaller set of roads for vehicles" src="../_images/taxi_net.png" style="width: 333.0px; height: 217.25px;" />
</a>
<p class="rubric">Problem</p>
<ul class="simple">
<li><p>Create a view <code class="docutils literal notranslate"><span class="pre">taxi_net</span></code> for the <cite>taxi</cite>:</p>
<ul>
<li><p>The taxi can only circulate inside this Bounding Box: <code class="docutils literal notranslate"><span class="pre">(-48.52,-1.46,-48.45,-1.41)</span></code></p></li>
<li><p>The taxi speed is 10% slower than the particular vehicle.</p></li>
</ul>
</li>
<li><p>Verify the reduced number of road segments.</p></li>
</ul>
<p class="rubric">Solution</p>
<p>Creating the view:</p>
<ul class="simple">
<li><p>Adjust the taxi’s <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> to be 10% slower than of the
particular vehicle. (line <strong>7</strong>)</p></li>
<li><p>The graph for the taxi is a subset of the <code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code> graph. (line <strong>9</strong>)</p></li>
<li><p>Can only circulate inside the bounding box:
<code class="docutils literal notranslate"><span class="pre">(-48.52,-1.46,-48.45,-1.41)</span></code>. (line <strong>10</strong>)</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- DROP VIEW taxi_net;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">taxi_net</span><span class="w"> </span><span class="k">AS</span>
<span class="w">    </span><span class="k">SELECT</span>
<span class="w">      </span><span class="n">id</span><span class="p">,</span>
<span class="w">      </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target</span><span class="p">,</span>
<span class="hll"><span class="w">      </span><span class="n">cost</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">10</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span><span class="w"> </span><span class="n">reverse_cost</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="mi">10</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">reverse_cost</span><span class="p">,</span>
</span><span class="w">      </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">length</span><span class="p">,</span><span class="w"> </span><span class="n">geom</span>
<span class="hll"><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">vehicle_net</span>
</span><span class="hll"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">vehicle_net</span><span class="p">.</span><span class="n">geom</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">ST_MakeEnvelope</span><span class="p">(</span><span class="o">-</span><span class="mi">48</span><span class="p">.</span><span class="mi">52</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">46</span><span class="p">,</span><span class="o">-</span><span class="mi">48</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">.</span><span class="mi">41</span><span class="p">);</span>
</span></pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="e400f7c8-218c-4a5f-a300-ff9a24f2aeb5" name="e400f7c8-218c-4a5f-a300-ff9a24f2aeb5" type="checkbox"><label class="sphinx_collapse__label" for="e400f7c8-218c-4a5f-a300-ff9a24f2aeb5"><i class="sphinx_collapse__icon"></i>Response of command</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">VIEW</span>
</pre></div>
</div>
</div>
</div>
<p>Count the rows on <code class="docutils literal notranslate"><span class="pre">taxi_net</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">taxi_net</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="0fc58e0d-8290-4c28-849e-fcbf2cdc9e46" name="0fc58e0d-8290-4c28-849e-fcbf2cdc9e46" type="checkbox"><label class="sphinx_collapse__label" for="0fc58e0d-8290-4c28-849e-fcbf2cdc9e46"><i class="sphinx_collapse__icon"></i>Row count results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
  <span class="mi">9180</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>Get the description.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">dS</span><span class="o">+</span> <span class="n">taxi_net</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="1a2b3474-c9a6-4913-ac0c-746ccf8a3043" name="1a2b3474-c9a6-4913-ac0c-746ccf8a3043" type="checkbox"><label class="sphinx_collapse__label" for="1a2b3474-c9a6-4913-ac0c-746ccf8a3043"><i class="sphinx_collapse__icon"></i>The view description</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                       <span class="n">View</span> <span class="s2">&quot;public.taxi_net&quot;</span>
    <span class="n">Column</span>    <span class="o">|</span>           <span class="n">Type</span>            <span class="o">|</span> <span class="n">Collation</span> <span class="o">|</span> <span class="n">Nullable</span> <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Storage</span>  <span class="o">|</span> <span class="n">Description</span> 
<span class="o">--------------+---------------------------+-----------+----------+---------+----------+-------------</span>
 <span class="nb">id</span>           <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">source</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">target</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">cost</span>         <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">reverse_cost</span> <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">name</span>         <span class="o">|</span> <span class="n">text</span>                      <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">extended</span> <span class="o">|</span> 
 <span class="n">length</span>       <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span> 
 <span class="n">geom</span>         <span class="o">|</span> <span class="n">geometry</span><span class="p">(</span><span class="n">LineString</span><span class="p">,</span><span class="mi">4326</span><span class="p">)</span> <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">main</span>     <span class="o">|</span> 
<span class="n">View</span> <span class="n">definition</span><span class="p">:</span>
 <span class="n">SELECT</span> <span class="n">vehicle_net</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">source</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">target</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">cost</span> <span class="o">*</span> <span class="mf">1.10</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">reverse_cost</span> <span class="o">*</span> <span class="mf">1.10</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span> <span class="n">AS</span> <span class="n">reverse_cost</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
    <span class="n">vehicle_net</span><span class="o">.</span><span class="n">geom</span>
   <span class="n">FROM</span> <span class="n">vehicle_net</span>
  <span class="n">WHERE</span> <span class="n">vehicle_net</span><span class="o">.</span><span class="n">geom</span> <span class="o">&amp;&amp;</span> <span class="n">st_makeenvelope</span><span class="p">(</span><span class="s1">&#39;-48.52&#39;</span><span class="p">::</span><span class="n">numeric</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span><span class="p">,</span> <span class="s1">&#39;-1.46&#39;</span><span class="p">::</span><span class="n">numeric</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span><span class="p">,</span> <span class="s1">&#39;-48.45&#39;</span><span class="p">::</span><span class="n">numeric</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span><span class="p">,</span> <span class="s1">&#39;-1.41&#39;</span><span class="p">::</span><span class="n">numeric</span><span class="p">::</span><span class="n">double</span> <span class="n">precision</span><span class="p">);</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-7-creating-a-materialized-view-for-routing-pedestrians">
<h3><a class="toc-backref" href="#id12" role="doc-backlink"><span class="section-number">4.4.3. </span>Exercise 7: Creating a materialized view for routing pedestrians</a><a class="headerlink" href="#exercise-7-creating-a-materialized-view-for-routing-pedestrians" title="Link to this heading">¶</a></h3>
<a class="reference internal image-reference" href="../_images/walk_net.png"><img alt="View of roads for pedestrians" src="../_images/walk_net.png" style="width: 333.0px; height: 217.25px;" />
</a>
<p class="rubric">Problem</p>
<ul class="simple">
<li><p>Create a materialized view with minimal amount of information for processing pedestrians.</p></li>
<li><p>Routing <cite>cost</cite> and <cite>reverse_cost</cite> will be on seconds for routing calculations.</p>
<ul>
<li><p>The speed is <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">mts/sec</span></code>.</p></li>
</ul>
</li>
<li><p>Exclude <cite>motorway</cite> , <cite>primary</cite> and <cite>secondary</cite> segments.</p></li>
<li><p>Data needed in the view for further processing.</p>
<ul>
<li><p><cite>length_m</cite> The length in meters.</p></li>
<li><p><cite>the_geom</cite> The geometry.</p></li>
</ul>
</li>
<li><p>Verify the number of edges was reduced.</p></li>
</ul>
<p class="rubric">Solution</p>
<ul class="simple">
<li><p>Creating the view:</p>
<ul>
<li><p>Similar to <a class="reference internal" href="#exercise-5-creating-a-view-for-routing">Exercise 5: Creating a view for routing</a>:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> are in terms of seconds with speed of <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">mts/sec</span></code>. (line <strong>7</strong>)</p></li>
<li><p>Exclude <cite>motorway</cite>, <cite>primary</cite> and <cite>secondary</cite> . (line <strong>11</strong>)</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- DROP MATERIALIZED VIEW walk_net CASCADE;</span>

<span class="k">CREATE</span><span class="w"> </span><span class="n">MATERIALIZED</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">walk_net</span><span class="w"> </span><span class="k">AS</span>

<span class="k">WITH</span>
<span class="n">allc</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">component</span><span class="p">),</span>
<span class="hll"><span class="n">maxcount</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="p">(</span><span class="k">count</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">allc</span><span class="p">),</span>
</span><span class="n">the_component</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">allc</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="k">max</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">maxcount</span><span class="p">))</span>

<span class="k">SELECT</span>
<span class="hll"><span class="w">  </span><span class="n">gid</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">id</span><span class="p">,</span>
</span><span class="w">  </span><span class="n">source_osm</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">source</span><span class="p">,</span><span class="w"> </span><span class="n">target_osm</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">target</span><span class="p">,</span>
<span class="w">  </span><span class="n">cost_s</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">cost</span><span class="p">,</span><span class="w"> </span><span class="n">reverse_cost_s</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">reverse_cost</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">length_m</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">length</span><span class="p">,</span><span class="w"> </span><span class="n">the_geom</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">geom</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">ways</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">the_component</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">component</span><span class="p">)</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">configuration</span><span class="w"> </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">tag_id</span><span class="p">)</span>
<span class="k">WHERE</span><span class="w">  </span><span class="n">tag_value</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;motorway&#39;</span><span class="p">,</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span><span class="s1">&#39;secondary&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="14d7fa7d-3d65-44f4-ac43-a4d061ee7540" name="14d7fa7d-3d65-44f4-ac43-a4d061ee7540" type="checkbox"><label class="sphinx_collapse__label" for="14d7fa7d-3d65-44f4-ac43-a4d061ee7540"><i class="sphinx_collapse__icon"></i>Response of command</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="mi">28450</span>
</pre></div>
</div>
</div>
</div>
<p>Count the rows on the view <code class="docutils literal notranslate"><span class="pre">walk_net</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">walk_net</span><span class="p">;</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="2bdaedba-a042-4fe1-8ae1-6b5c85a17bca" name="2bdaedba-a042-4fe1-8ae1-6b5c85a17bca" type="checkbox"><label class="sphinx_collapse__label" for="2bdaedba-a042-4fe1-8ae1-6b5c85a17bca"><i class="sphinx_collapse__icon"></i>Row count results</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">count</span> 
<span class="o">-------</span>
 <span class="mi">28450</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>Get the description.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>\<span class="n">dS</span><span class="o">+</span> <span class="n">walk_net</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="3b99f0c7-c0a6-4df7-9113-e4441ab3a708" name="3b99f0c7-c0a6-4df7-9113-e4441ab3a708" type="checkbox"><label class="sphinx_collapse__label" for="3b99f0c7-c0a6-4df7-9113-e4441ab3a708"><i class="sphinx_collapse__icon"></i>The view description</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                                               <span class="n">Materialized</span> <span class="n">view</span> <span class="s2">&quot;public.walk_net&quot;</span>
    <span class="n">Column</span>    <span class="o">|</span>           <span class="n">Type</span>            <span class="o">|</span> <span class="n">Collation</span> <span class="o">|</span> <span class="n">Nullable</span> <span class="o">|</span> <span class="n">Default</span> <span class="o">|</span> <span class="n">Storage</span>  <span class="o">|</span> <span class="n">Compression</span> <span class="o">|</span> <span class="n">Stats</span> <span class="n">target</span> <span class="o">|</span> <span class="n">Description</span> 
<span class="o">--------------+---------------------------+-----------+----------+---------+----------+-------------+--------------+-------------</span>
 <span class="nb">id</span>           <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">source</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">target</span>       <span class="o">|</span> <span class="n">bigint</span>                    <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">cost</span>         <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">reverse_cost</span> <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">name</span>         <span class="o">|</span> <span class="n">text</span>                      <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">extended</span> <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">length</span>       <span class="o">|</span> <span class="n">double</span> <span class="n">precision</span>          <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">plain</span>    <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
 <span class="n">geom</span>         <span class="o">|</span> <span class="n">geometry</span><span class="p">(</span><span class="n">LineString</span><span class="p">,</span><span class="mi">4326</span><span class="p">)</span> <span class="o">|</span>           <span class="o">|</span>          <span class="o">|</span>         <span class="o">|</span> <span class="n">main</span>     <span class="o">|</span>             <span class="o">|</span>              <span class="o">|</span> 
<span class="n">View</span> <span class="n">definition</span><span class="p">:</span>
 <span class="n">WITH</span> <span class="n">allc</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="n">ways_1</span><span class="o">.</span><span class="n">component</span><span class="p">,</span>
            <span class="n">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="n">AS</span> <span class="n">count</span>
           <span class="n">FROM</span> <span class="n">ways</span> <span class="n">ways_1</span>
          <span class="n">GROUP</span> <span class="n">BY</span> <span class="n">ways_1</span><span class="o">.</span><span class="n">component</span>
        <span class="p">),</span> <span class="n">maxcount</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="nb">max</span><span class="p">(</span><span class="n">allc</span><span class="o">.</span><span class="n">count</span><span class="p">)</span> <span class="n">AS</span> <span class="nb">max</span>
           <span class="n">FROM</span> <span class="n">allc</span>
        <span class="p">),</span> <span class="n">the_component</span> <span class="n">AS</span> <span class="p">(</span>
         <span class="n">SELECT</span> <span class="n">allc</span><span class="o">.</span><span class="n">component</span>
           <span class="n">FROM</span> <span class="n">allc</span>
          <span class="n">WHERE</span> <span class="n">allc</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="p">((</span> <span class="n">SELECT</span> <span class="n">maxcount</span><span class="o">.</span><span class="n">max</span>
                   <span class="n">FROM</span> <span class="n">maxcount</span><span class="p">))</span>
        <span class="p">)</span>
 <span class="n">SELECT</span> <span class="n">ways</span><span class="o">.</span><span class="n">gid</span> <span class="n">AS</span> <span class="nb">id</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">source_osm</span> <span class="n">AS</span> <span class="n">source</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">target_osm</span> <span class="n">AS</span> <span class="n">target</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">cost_s</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">reverse_cost_s</span> <span class="n">AS</span> <span class="n">reverse_cost</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">length_m</span> <span class="n">AS</span> <span class="n">length</span><span class="p">,</span>
    <span class="n">ways</span><span class="o">.</span><span class="n">the_geom</span> <span class="n">AS</span> <span class="n">geom</span>
   <span class="n">FROM</span> <span class="n">ways</span>
     <span class="n">JOIN</span> <span class="n">the_component</span> <span class="n">USING</span> <span class="p">(</span><span class="n">component</span><span class="p">)</span>
     <span class="n">JOIN</span> <span class="n">configuration</span> <span class="n">USING</span> <span class="p">(</span><span class="n">tag_id</span><span class="p">)</span>
  <span class="n">WHERE</span> <span class="n">configuration</span><span class="o">.</span><span class="n">tag_value</span> <span class="o">&lt;&gt;</span> <span class="n">ALL</span> <span class="p">(</span><span class="n">ARRAY</span><span class="p">[</span><span class="s1">&#39;motorway&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;primary&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">,</span> <span class="s1">&#39;secondary&#39;</span><span class="p">::</span><span class="n">text</span><span class="p">]);</span>
<span class="n">Access</span> <span class="n">method</span><span class="p">:</span> <span class="n">heap</span>

</pre></div>
</div>
</div>
</div>
</section>
<section id="exercise-8-testing-the-views-for-routing">
<h3><a class="toc-backref" href="#id13" role="doc-backlink"><span class="section-number">4.4.4. </span>Exercise 8: Testing the views for routing</a><a class="headerlink" href="#exercise-8-testing-the-views-for-routing" title="Link to this heading">¶</a></h3>
<a class="reference internal image-reference" href="../_images/ch7-e3.png"><img alt="From the Venue to the hotel using the osm_id." src="../_images/ch7-e3.png" style="width: 388.0px; height: 218.5px;" />
</a>
<p class="rubric">Problem</p>
<ul class="simple">
<li><p>Test the created views</p></li>
</ul>
<p>In particular:</p>
<ul class="simple">
<li><p>From the “Estação das Docas” to the “Hangar Convention Center” using the OSM identifier</p></li>
<li><p>the views to be tested are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">taxi_net</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">walk_net</span></code></p></li>
</ul>
</li>
<li><p>Only show the following results, as the other columns are to be ignored on the function.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">edge</span></code> with the name <code class="docutils literal notranslate"><span class="pre">id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cost</span></code> with the name: <code class="docutils literal notranslate"><span class="pre">seconds</span></code></p></li>
</ul>
</li>
</ul>
<p class="rubric">Solution</p>
<ul class="simple">
<li><p>In general</p>
<ul>
<li><p>The departure is Estação das Docas with OSM identifier <code class="docutils literal notranslate"><span class="pre">5661895682</span></code>.</p></li>
<li><p>The destination is Hangar Convention Center with OSM identifier <code class="docutils literal notranslate"><span class="pre">10982869752</span></code>.</p></li>
</ul>
</li>
</ul>
<p>For <code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code> is used.</p></li>
<li><p>Selection of the columns with the corresponding names are on line <strong>1</strong>.</p></li>
<li><p>The view is prepared with the column names that pgRouting use.</p>
<ul>
<li><p>There is no need to rename columns. (line <strong>3</strong>)</p></li>
</ul>
</li>
<li><p>The OSM identifiers of the departure and destination are used. (line <strong>4</strong>)</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="linenos">1</span><span class="k">SELECT</span><span class="w"> </span><span class="n">start_vid</span><span class="p">,</span><span class="w"> </span><span class="n">end_vid</span><span class="p">,</span><span class="w"> </span><span class="n">agg_cost</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">seconds</span>
</span><span class="linenos">2</span><span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstraCost</span><span class="p">(</span>
<span class="hll"><span class="linenos">3</span><span class="w">  </span><span class="s1">&#39;SELECT * FROM vehicle_net&#39;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">4</span><span class="w">  </span><span class="mi">5661895682</span><span class="p">,</span><span class="w"> </span><span class="mi">10982869752</span><span class="p">);</span>
</span></pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="31fb4608-8249-406f-b367-0177a531c2b7" name="31fb4608-8249-406f-b367-0177a531c2b7" type="checkbox"><label class="sphinx_collapse__label" for="31fb4608-8249-406f-b367-0177a531c2b7"><i class="sphinx_collapse__icon"></i>Query resultes</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">start_vid</span>  <span class="o">|</span>   <span class="n">end_vid</span>   <span class="o">|</span>      <span class="n">seconds</span>      
<span class="o">------------+-------------+-------------------</span>
 <span class="mi">5661895682</span> <span class="o">|</span> <span class="mi">10982869752</span> <span class="o">|</span> <span class="mf">465.6834621403192</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">taxi_net</span></code>:</p>
<ul class="simple">
<li><p>Similar as the previous one but with <code class="docutils literal notranslate"><span class="pre">taxi_net</span></code>. (line <strong>3</strong>)</p></li>
<li><p>The results give the same route as with <code class="docutils literal notranslate"><span class="pre">vehicle_net</span></code> but <code class="docutils literal notranslate"><span class="pre">cost</span></code> is lower</p></li>
</ul>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">start_vid</span><span class="p">,</span><span class="w"> </span><span class="n">end_vid</span><span class="p">,</span><span class="w"> </span><span class="n">agg_cost</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">seconds</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstraCost</span><span class="p">(</span>
<span class="hll"><span class="w">  </span><span class="s1">&#39;SELECT * FROM taxi_net&#39;</span><span class="p">,</span>
</span><span class="w">  </span><span class="mi">5661895682</span><span class="p">,</span><span class="w"> </span><span class="mi">10982869752</span><span class="p">);</span>
</pre></div>
</div>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="80e0a9df-4d64-4714-a263-b1615c7b4a0e" name="80e0a9df-4d64-4714-a263-b1615c7b4a0e" type="checkbox"><label class="sphinx_collapse__label" for="80e0a9df-4d64-4714-a263-b1615c7b4a0e"><i class="sphinx_collapse__icon"></i>Query resultes</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">start_vid</span>  <span class="o">|</span>   <span class="n">end_vid</span>   <span class="o">|</span>      <span class="n">seconds</span>      
<span class="o">------------+-------------+-------------------</span>
 <span class="mi">5661895682</span> <span class="o">|</span> <span class="mi">10982869752</span> <span class="o">|</span> <span class="mf">512.2518083543514</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">walk_net</span></code>:</p>
<ul>
<li><p>Similar as the previous one but with <code class="docutils literal notranslate"><span class="pre">walk_net</span></code>. (line <strong>3</strong>)</p></li>
<li><p>The results give a different route than of the vehicles.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">start_vid</span><span class="p">,</span><span class="w"> </span><span class="n">end_vid</span><span class="p">,</span><span class="w"> </span><span class="n">agg_cost</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">seconds</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">pgr_dijkstraCost</span><span class="p">(</span>
<span class="hll"><span class="w">  </span><span class="s1">&#39;SELECT * FROM walk_net&#39;</span><span class="p">,</span>
</span><span class="w">  </span><span class="mi">5661895682</span><span class="p">,</span><span class="w"> </span><span class="mi">10982869752</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
<div class="sphinx_collapse docutils container">
<input class="sphinx_collapse__input" id="5865c05a-3fe1-4911-b78c-929136518e8c" name="5865c05a-3fe1-4911-b78c-929136518e8c" type="checkbox"><label class="sphinx_collapse__label" for="5865c05a-3fe1-4911-b78c-929136518e8c"><i class="sphinx_collapse__icon"></i>Query resultes</label><div class="sphinx_collapse__content docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">seconds</span> 
<span class="o">-----------+---------+---------</span>
<span class="p">(</span><span class="mi">0</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2010-2024 pgRouting Developers.<br/>
      Last updated on Nov 05, 2024.<br/>
    </p>
  </div>
</footer>
  </body>
</html>